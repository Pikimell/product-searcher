{"version":3,"file":"commonHelpers2.js","sources":["../src/js/product.js"],"sourcesContent":["import { v4 as generateID } from 'uuid';\nimport { saveToLS, loadFromLS } from './helpers';\nconst userData = loadFromLS('user-data') || [];\nconst id = loadFromLS('editId');\n\nconst refs = {\n  form: document.querySelector('.js-product-form'),\n};\n\nfunction init() {\n  if (!id) {\n    refs.form.addEventListener('submit', onFormSubmit);\n    return;\n  }\n\n  const product = userData.find(el => el.id === id);\n\n  if (!product) return;\n  for (const [key, value] of Object.entries(product)) {\n    if (refs.form.elements[key]) refs.form.elements[key].value = value;\n  }\n\n  console.log(refs.form.elements.source);\n\n  refs.form.elements.btn.textContent = 'Save Changes';\n\n  refs.form.addEventListener('submit', onFormSave);\n}\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  const data = {\n    id: generateID(),\n  };\n\n  formData.forEach((value, key) => {\n    data[key] = value;\n  });\n\n  data.youtube_media = data.youtube_media ? true : false;\n  userData.push(data);\n  saveToLS('user-data', userData);\n  e.target.reset();\n}\n\nfunction onFormSave(e) {\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  const productIndex = userData.findIndex(el => el.id === id);\n  const product = { ...userData[productIndex] };\n\n  formData.forEach((value, key) => {\n    product[key] = value;\n  });\n\n  product.youtube_media = product.youtube_media ? true : false;\n\n  userData.splice(productIndex, 1, product);\n  saveToLS('user-data', userData);\n\n  localStorage.removeItem('editId');\n  const a = document.createElement('a');\n  a.href = './index.html';\n  a.click();\n}\n\ninit();\n"],"names":["userData","loadFromLS","id","refs","init","onFormSubmit","product","el","key","value","onFormSave","formData","data","generateID","saveToLS","productIndex","a"],"mappings":"wGAEA,MAAMA,EAAWC,EAAW,WAAW,GAAK,GACtCC,EAAKD,EAAW,QAAQ,EAExBE,EAAO,CACX,KAAM,SAAS,cAAc,kBAAkB,CACjD,EAEA,SAASC,GAAO,CACd,GAAI,CAACF,EAAI,CACPC,EAAK,KAAK,iBAAiB,SAAUE,CAAY,EACjD,MACD,CAED,MAAMC,EAAUN,EAAS,KAAKO,GAAMA,EAAG,KAAOL,CAAE,EAEhD,GAAKI,EACL,UAAW,CAACE,EAAKC,CAAK,IAAK,OAAO,QAAQH,CAAO,EAC3CH,EAAK,KAAK,SAASK,CAAG,IAAGL,EAAK,KAAK,SAASK,CAAG,EAAE,MAAQC,GAG/D,QAAQ,IAAIN,EAAK,KAAK,SAAS,MAAM,EAErCA,EAAK,KAAK,SAAS,IAAI,YAAc,eAErCA,EAAK,KAAK,iBAAiB,SAAUO,CAAU,EACjD,CAEA,SAASL,EAAa,EAAG,CACvB,EAAE,eAAc,EAChB,MAAMM,EAAW,IAAI,SAAS,EAAE,MAAM,EAChCC,EAAO,CACX,GAAIC,EAAY,CACpB,EAEEF,EAAS,QAAQ,CAACF,EAAOD,IAAQ,CAC/BI,EAAKJ,CAAG,EAAIC,CAChB,CAAG,EAEDG,EAAK,cAAgB,EAAAA,EAAK,cAC1BZ,EAAS,KAAKY,CAAI,EAClBE,EAAS,YAAad,CAAQ,EAC9B,EAAE,OAAO,OACX,CAEA,SAASU,EAAW,EAAG,CACrB,EAAE,eAAc,EAChB,MAAMC,EAAW,IAAI,SAAS,EAAE,MAAM,EAChCI,EAAef,EAAS,UAAUO,GAAMA,EAAG,KAAOL,CAAE,EACpDI,EAAU,CAAE,GAAGN,EAASe,CAAY,CAAC,EAE3CJ,EAAS,QAAQ,CAACF,EAAOD,IAAQ,CAC/BF,EAAQE,CAAG,EAAIC,CACnB,CAAG,EAEDH,EAAQ,cAAgB,EAAAA,EAAQ,cAEhCN,EAAS,OAAOe,EAAc,EAAGT,CAAO,EACxCQ,EAAS,YAAad,CAAQ,EAE9B,aAAa,WAAW,QAAQ,EAChC,MAAMgB,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAO,eACTA,EAAE,MAAK,CACT,CAEAZ,EAAM"}
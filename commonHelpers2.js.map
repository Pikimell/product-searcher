{"version":3,"file":"commonHelpers2.js","sources":["../src/js/product.js"],"sourcesContent":["import { v4 as generateID } from 'uuid';\nimport { saveToLS, loadFromLS } from './helpers';\nconst userData = loadFromLS('user-data') || [];\nconst id = loadFromLS('editId');\n\nconst refs = {\n  form: document.querySelector('.js-product-form'),\n};\n\nfunction init() {\n  if (!id) {\n    refs.form.addEventListener('submit', onFormSubmit);\n    return;\n  }\n\n  const product = userData.find(el => el.id === id);\n  console.log(product, id);\n  if (!product) return;\n  for (const [key, value] of Object.entries(product)) {\n    if (refs.form.elements[key]) refs.form.elements[key].value = value;\n  }\n  refs.form.elements.youtube_media.checked =\n    product.youtube_media === 'Checked';\n\n  setActiveOption(refs.form.elements.source, product.source);\n  setActiveOption(refs.form.elements.niche, product.niche || '');\n\n  refs.form.elements.btn.textContent = 'Save Changes';\n\n  refs.form.addEventListener('submit', onFormSave);\n}\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  const data = {\n    id: generateID(),\n  };\n\n  formData.forEach((value, key) => {\n    data[key] = value;\n  });\n\n  data.youtube_media = data.youtube_media ? 'Checked' : 'Unchecked';\n  userData.push(data);\n  saveToLS('user-data', userData);\n  e.target.reset();\n}\n\nfunction onFormSave(e) {\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  const productIndex = userData.findIndex(el => el.id === id);\n  const product = { ...userData[productIndex] };\n  delete product.youtube_media;\n\n  formData.forEach((value, key) => {\n    product[key] = value;\n  });\n\n  product.youtube_media = product.youtube_media ? 'Checked' : 'Unchecked';\n  console.log(product.youtube_media);\n\n  userData.splice(productIndex, 1, product);\n  saveToLS('user-data', userData);\n\n  localStorage.removeItem('editId');\n  const a = document.createElement('a');\n  a.href = './index.html';\n  a.click();\n}\n\ninit();\n\nfunction setActiveOption(selectElement, optionValue) {\n  var options = selectElement.options;\n  for (var i = 0; i < options.length; i++) {\n    if (options[i].value.toLowerCase() === optionValue.toLowerCase()) {\n      options[i].selected = true;\n      break;\n    }\n  }\n}\n"],"names":["userData","loadFromLS","id","refs","init","onFormSubmit","product","el","key","value","setActiveOption","onFormSave","formData","data","generateID","saveToLS","productIndex","a","selectElement","optionValue","options","i"],"mappings":"wGAEA,MAAMA,EAAWC,EAAW,WAAW,GAAK,GACtCC,EAAKD,EAAW,QAAQ,EAExBE,EAAO,CACX,KAAM,SAAS,cAAc,kBAAkB,CACjD,EAEA,SAASC,GAAO,CACd,GAAI,CAACF,EAAI,CACPC,EAAK,KAAK,iBAAiB,SAAUE,CAAY,EACjD,MACD,CAED,MAAMC,EAAUN,EAAS,KAAKO,GAAMA,EAAG,KAAOL,CAAE,EAEhD,GADA,QAAQ,IAAII,EAASJ,CAAE,EACnB,EAACI,EACL,UAAW,CAACE,EAAKC,CAAK,IAAK,OAAO,QAAQH,CAAO,EAC3CH,EAAK,KAAK,SAASK,CAAG,IAAGL,EAAK,KAAK,SAASK,CAAG,EAAE,MAAQC,GAE/DN,EAAK,KAAK,SAAS,cAAc,QAC/BG,EAAQ,gBAAkB,UAE5BI,EAAgBP,EAAK,KAAK,SAAS,OAAQG,EAAQ,MAAM,EACzDI,EAAgBP,EAAK,KAAK,SAAS,MAAOG,EAAQ,OAAS,EAAE,EAE7DH,EAAK,KAAK,SAAS,IAAI,YAAc,eAErCA,EAAK,KAAK,iBAAiB,SAAUQ,CAAU,EACjD,CAEA,SAASN,EAAa,EAAG,CACvB,EAAE,eAAc,EAChB,MAAMO,EAAW,IAAI,SAAS,EAAE,MAAM,EAChCC,EAAO,CACX,GAAIC,EAAY,CACpB,EAEEF,EAAS,QAAQ,CAACH,EAAOD,IAAQ,CAC/BK,EAAKL,CAAG,EAAIC,CAChB,CAAG,EAEDI,EAAK,cAAgBA,EAAK,cAAgB,UAAY,YACtDb,EAAS,KAAKa,CAAI,EAClBE,EAAS,YAAaf,CAAQ,EAC9B,EAAE,OAAO,OACX,CAEA,SAASW,EAAW,EAAG,CACrB,EAAE,eAAc,EAChB,MAAMC,EAAW,IAAI,SAAS,EAAE,MAAM,EAChCI,EAAehB,EAAS,UAAUO,GAAMA,EAAG,KAAOL,CAAE,EACpDI,EAAU,CAAE,GAAGN,EAASgB,CAAY,CAAC,EAC3C,OAAOV,EAAQ,cAEfM,EAAS,QAAQ,CAACH,EAAOD,IAAQ,CAC/BF,EAAQE,CAAG,EAAIC,CACnB,CAAG,EAEDH,EAAQ,cAAgBA,EAAQ,cAAgB,UAAY,YAC5D,QAAQ,IAAIA,EAAQ,aAAa,EAEjCN,EAAS,OAAOgB,EAAc,EAAGV,CAAO,EACxCS,EAAS,YAAaf,CAAQ,EAE9B,aAAa,WAAW,QAAQ,EAChC,MAAMiB,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAO,eACTA,EAAE,MAAK,CACT,CAEAb,IAEA,SAASM,EAAgBQ,EAAeC,EAAa,CAEnD,QADIC,EAAUF,EAAc,QACnBG,EAAI,EAAGA,EAAID,EAAQ,OAAQC,IAClC,GAAID,EAAQC,CAAC,EAAE,MAAM,gBAAkBF,EAAY,cAAe,CAChEC,EAAQC,CAAC,EAAE,SAAW,GACtB,KACD,CAEL"}